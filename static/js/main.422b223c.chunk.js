(this["webpackJsonpovertone-reactor"]=this["webpackJsonpovertone-reactor"]||[]).push([[0],{19:function(e,t,n){e.exports=n(35)},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);n(20);var a=n(0),r=n.n(a),c=n(14),o=n.n(c),i=n(1),u=n(4),s=n(10),f=function(e){var t=e.energy,n=Object(a.useRef)(null);return Object(s.b)((function(){n.current&&(n.current.rotation.z+=t/100,n.current.rotation.y+=t/100)})),r.a.createElement("mesh",{ref:n,position:[0,0,2],castShadow:!0},r.a.createElement("dodecahedronBufferGeometry",{attach:"geometry"}),r.a.createElement("meshNormalMaterial",{attach:"material"}))},l=n(3),m=n.n(l);m.a.volume=.5;var d=new m.a.Sound({source:"wave",options:{frequency:100,volume:.2}});d.addEffect(new m.a.Effects.Distortion({gain:.2})),d.addEffect(new m.a.Effects.Reverb({time:1,decay:.8,reverse:!0,mix:.5}));var E=function(){return d.play()},v=function(){return d.stop()},b=function(e){return d.frequency=e},h=new m.a.Sound({source:"input"});h.addEffect(new m.a.Effects.Distortion({gain:1})),h.addEffect(new m.a.Effects.Delay({feedback:.6,time:.4,mix:.5}));var p=function(){return h.play()},y=function(){return h.stop()},O=new Map;!function e(){O.forEach((function(e){return e()})),window.setTimeout(e,100)}();var g=function(e,t,n){var r=Object(a.useState)(0),c=Object(i.a)(r,2),o=c[0],u=c[1];return Object(a.useEffect)((function(){return p(),navigator.getUserMedia({audio:!0},(function(e){var t=new AudioContext,n=t.createMediaStreamSource(e),a=t.createAnalyser();n.connect(a),a.fftSize=1024;var r=new Uint8Array(a.frequencyBinCount);!function e(){requestAnimationFrame(e),a.getByteFrequencyData(r);var t=r[0];u(Math.floor(t/2))}()}),(function(){})),function(){y()}}),[]),function(e){var t=Object(a.useRef)();Object(a.useEffect)((function(){t.current=e}),[e]),Object(a.useEffect)((function(){var e=Date.now();return O.set(e,(function(){return t.current&&t.current.apply(t,arguments)})),function(){O.delete(e)}}),[])}((function(){var a,r,c=e+((o-(a=0))*(10-(r=1))/(100-a)+r)-n;c>=100&&(c=100),c<=0&&(c=0),t(c>e?e+n:e-n)})),o},j=new m.a.Sound("./assets/sounds/level-up.wav",{options:{volume:.1}});j.addEffect(new m.a.Effects.Delay({feedback:.6,time:.4,mix:.5}));var S=function(){return j.play()},w=n(2),x=function(){return r.a.createElement("mesh",{receiveShadow:!0},r.a.createElement("planeBufferGeometry",{attach:"geometry",args:[1e3,1e3]}),r.a.createElement("meshPhongMaterial",{attach:"material",color:"#272727"}))},M=u.StyleSheet.create({container:{height:"100%",display:"flex",flexDirection:"column",padding:20},header:{display:"flex",alignItems:"center",height:100,zIndex:1},headerTitle:{flex:1},headerStats:{},main:{position:"absolute",top:0,right:0,left:0,bottom:0}}),R=function(){var e=function(){var e=Object(a.useState)(50),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){return E(),function(){v()}}),[]),Object(a.useEffect)((function(){b(n+100)}),[n]),{energy:n,setEnergy:r}}(),t=e.energy,n=e.setEnergy,c=function(e){var t=Object(a.useState)(1),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){e<100||(c((function(e){return e+1})),S())}),[e]),r}(t),o=Object(a.useState)(1),l=Object(i.a)(o,2),m=l[0],d=l[1],h=Object(a.useState)(1),p=Object(i.a)(h,1)[0];return g(t,n,m*p),Object(a.useEffect)((function(){d(c),n(0)}),[c,n]),r.a.createElement("div",{className:Object(u.css)(M.container)},r.a.createElement("header",{className:Object(u.css)(M.header)},r.a.createElement("h1",{className:Object(u.css)(M.headerTitle)},"Overtone Reactor"),r.a.createElement("div",{className:Object(u.css)(M.headerStats)},r.a.createElement("div",null,"Residents: ",m),r.a.createElement("div",null,"Watts per Resident: ",p))),r.a.createElement("main",{className:Object(u.css)(M.main)},r.a.createElement(s.a,{camera:{position:[0,0,10]},onCreated:function(e){var t=e.gl;t.shadowMap.enabled=!0,t.shadowMap.type=w.PCFSoftShadowMap}},">",r.a.createElement("ambientLight",{intensity:.5}),r.a.createElement("spotLight",{intensity:.6,position:[30,30,50],angle:.2,penumbra:1,castShadow:!0}),r.a.createElement(x,null),r.a.createElement(f,{energy:t}))))},D=u.StyleSheet.create({container:{textAlign:"center",padding:20}}),N=function(e){var t=e.onStart;return r.a.createElement("div",{className:Object(u.css)(D.container)},r.a.createElement("h1",null,"Overtone Reactor"),r.a.createElement("p",null,"Welcome to the Overtone Reactor. Use your voice as a reactor to provide energy to your residents."),r.a.createElement("button",{onClick:t},"Start"))},k=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],c=t[1];return n?r.a.createElement(R,null):r.a.createElement(N,{onStart:function(){return c(!0)}})};n(34);o.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.422b223c.chunk.js.map